<Window x:Class="messenger.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Мессенджер" Height="500" Width="750" WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="170"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0" Margin="8">
            <!-- Некликабельное имя пользователя -->
            <Border CornerRadius="6" Background="#eef5ff" Padding="6,4" Margin="0,0,0,12" BorderBrush="#90c3ff" BorderThickness="1">
                <StackPanel>
                    <TextBlock Text="{Binding UserName}" FontWeight="Bold" FontSize="16" Foreground="#2067b2"/>
                    <TextBlock Text="Вы" FontSize="11" Foreground="Gray" Margin="0,-4,0,0"/>
                </StackPanel>
            </Border>
            <!-- Список собеседников -->
            <TextBlock Text="Чаты" FontSize="12" Foreground="#2067b2" Margin="0,0,0,3"/>
            <ListBox x:Name="UsersList" DisplayMemberPath="Name" MinHeight="110" Margin="0,0,0,12"/>
            <!-- Настройки портов -->
            <StackPanel>
                <TextBlock Text="Локальный порт:" FontSize="12"/>
                <TextBox x:Name="LocalPortTextBox" Text="9000" MinWidth="80" Margin="0,2,0,0"/>
                <TextBlock Text="IP собеседника:" FontSize="12"/>
                <TextBox x:Name="IpTextBox" Text="127.0.0.1" MinWidth="100" Margin="0,2,0,0"/>
                <TextBlock Text="Порт собеседника:" FontSize="12" Margin="0,5,0,0"/>
                <TextBox x:Name="PortTextBox" Text="9001" MinWidth="80" Margin="0,2,0,0"/>
            </StackPanel>
        </StackPanel>
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <!-- Сообщения -->
            <ListBox x:Name="MessagesList" Margin="8" Grid.Row="0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="0,0,0,1" BorderBrush="#eee" Padding="0,3,0,4">
                            <StackPanel>
                                <TextBlock FontWeight="Bold" FontSize="13" Text="{Binding Sender}" />
                                <TextBlock Text="{Binding Text}" FontSize="12" Margin="0,0,0,2" TextWrapping="Wrap"/>
                                <TextBlock FontSize="10" Foreground="Gray"
                                           Text="{Binding Time, StringFormat='отправлено {0:HH:mm:ss}'}" />
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <!-- Отправка -->
            <StackPanel Orientation="Horizontal" Margin="8,2,8,8" Grid.Row="1">
                <TextBox x:Name="MessageTextBox" Width="400" Height="30" Margin="0,0,6,0"/>
                <Button Content="Отправить" Width="105" Click="SendButton_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
